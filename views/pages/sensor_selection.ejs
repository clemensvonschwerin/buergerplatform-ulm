<!DOCTYPE html>
<html lang="en">

  <head>

    <% include ../partials/head.ejs %>

  </head>

  <body id="page-top">

    <% include ../partials/topbar.ejs %>

    <div id="wrapper">

		<% var activepage = "sensor_selection"; %>
      <% include ../partials/sidebar.ejs %>

      <div id="content-wrapper">

        <div class="container-fluid">
		
		<form enctype='application/json' id="sensor-selection-form" method="post" action="/sensor_selection" novalidate>
			Haltestellen: <br>
			<div class="panel-group" id="accordion">
			<% for(i=0; i<Object.keys(peoplecounters).length; i++) {%> 
			<% var busstop = Object.keys(peoplecounters)[i]; %>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#<%= busstop %>-fields">
								<%= busstop %>
							</a>
						</h4>
					</div>
				</div>
				<div class="panel-collapse collapse in" id="<%= busstop %>-fields">
					<div class="panel-body">
						<ul>
						<% for(j=0; j<Object.keys(peoplecounters[busstop]).length; j++) {%> 
						<% var field = Object.keys(peoplecounters[busstop])[j]; %>
							<li> 
							<input class="form-check-input" 
							type="checkbox" id="pc_<%= busstop %>_<%= field %>_cb" 
							name="pc_<%= busstop %>_<%= field %>"
							<% if(peoplecounters[busstop][field] == "on") { %>checked<% } %>
							onclick="var elem = document.getElementById('pc_<%= busstop %>_<%= field %>_cb'); if('checked' in elem.attributes) { elem.removeAttribute('checked'); } else { elem.setAttribute('checked', 'true'); }" />
							<label for="pc_<%= busstop %>_<%= field %>_cb" 
							class="form-check-label  <% if(peoplecounters[busstop][field] == "on") { %>active<% } %>"> 
							<%= field %>&nbsp;&nbsp;
							</label>
						<% } %>
						</ul>
					</div>
				</div>
			<% } %>
			</div>
			<button type="submit" class="btn btn-primary">Save my selection</button>
		</form>

        <!-- /.container-fluid -->

        <% include ../partials/footer.ejs %>

      </div>
      <!-- /.content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <% include ../partials/scripts.ejs %>

  </body>

</html>
